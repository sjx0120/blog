{{extend './common/layout.html'}}
{{block 'style'}}
<style>
h3{
    margin: 20px;
}
p{
    margin: 20px;
}
h4{
    margin: 20px;
}
span{
    margin: 20px;
}
textarea{
    margin-left: 20px;
}
.comment-list{
    border: 1px solid rgb(207, 233, 91);
}
</style>
{{/block}}
{{block 'main'}}
{{include './common/header.html'}}
<!-- 文章详情界面 -->
<div class="content">
    <h3>{{article.articlename}}</h3>
    <span style="color: coral;">{{article.author.username}}</span>
    <span>{{dateFormat(article.publishdate,'yyyy-mm-dd')}}</span>
    <p>{{article.description}}</p>
    <hr>
    <!-- 评论模块 -->
    <div class="article-comment">
        {{if userInfo}}
        <h4>评论：</h4>
        <form action="/home/comment" method="POST">
            <textarea style="color:black;" class="comment" name="content"></textarea>
            <!-- 隐藏域 -->
            <input type="hidden" name="uid" value="{{@userInfo._id}}">
            <input type="hidden" name="aid" value="{{@article._id}}">
            <input style="color:black;" type="submit">
        </form>
        {{else}}
        <h4><a href="/admin/login">请先登录，再来进行评论</a></h4>
        {{/if}}
        {{each comments}}
        <div class="comment-list">
            <span style="color: rgb(255, 130, 80);">{{$value.uid.username}}</span>
            <span>{{dateFormat($value.time,'yyyy-mm-dd')}}</span>
            <p>{{$value.content}}</p>
        </div>
        {{/each}}
    </div>
</div>
{{/block}}
{{block 'script'}}
{{/block}}